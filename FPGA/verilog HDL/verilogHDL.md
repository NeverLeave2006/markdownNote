# verilog HDL简介
硬件描述语言，不是软件语言
可综合代码，可仿真代码

常用术语:
- HDL Hardware Description Language. 硬件描述语言，用于对硬件进行建模。
- RTL Register Transfer Level 寄存器传送级定义了信号和寄存器数据流输入和输出的相互关系
- 行为建模 由输入输出关系描述的组件
  - 只有电路功能，没有结构
  - 没有专门的硬件目标
  - 出于综合以及仿真的目的
  - 可面向任意技术的通用代码

- 结构化建模 由底层互联组成的原语描述的组件
  -  电路功能和结构
  -  要求明确的硬件实现
  -  处于综合及仿真的目的
  -  可以是通用活着器件专用，也可以同时兼用

- 综合 将HDL译成电路,然后对表征电路进行优化

RTL综合 翻译电路，优化

- 模块 是Verilog HDL中的基本设计单元

## Verilog HDL基础
基本模型结构
- 大小写敏感
- 所有关机字为小写
- 空白用于提升可读性
- 分号是声明结束符
- 单行注释：//
- 多行注释：/*  */
- 时序规范用于仿真

## verilog HDL模型的基本结构
## verilog HDL模块的组成

- 端口
- 数据类型
- 赋值
- 操作符
- 行为建模
  - 连续赋值
  - 进程赋值

```verilog
module module_name(port_list);
  端口声明
  数据类型说明
  电路功能
  时许规范
endmodule;
```

### 端口
  - 端口列表:
    - 端口名称列表
    - 例如:
        module mult_acc(out,ina,inb,clk,clr);
  - 端口类型:
    - input -->输入端口
    - output-->输出端口
    - inout -->双向端口
  - 端口声明:
    - `<port_type> <port_name>`
    - 例子:
      - input[7:0] ina,inb;
      - input clk,clr;
      - output [15:0] out;

### 数据类型
- 网数据类型 表示进程之间的物理连接
  - wire 表示一个节点或者连接
  - tri  表示一个三态节点
  - supply0 逻辑0
  - supply1 逻辑1
  - 例子:
    - wire[7:0] out;
    - tri enable;

- 寄存器数据类型 表示暂时存储数据的变量
  - 可以表示寄存或者组合节点 
    - 寄存器可以是以下任意之一
      - 寄存器、整数、实数、时间、实时
    - 只能在进程声明，任务或者功能中赋值reg类型变量
    - 不能是逻辑门输出, 或者assign语句的输出
    - 例子:
      - reg[7:0] out;
      - integer count;

### 输入输出规则
|Veriable Type|input|output|inout|
|:----:|:----:|:----:|:----:|
|net|YES|YES|YES|
|register|NO|YES|NO|

### 赋值-数字
- sized或者unsized：
  - `<size>'<base format> <number>`
  - sized例子: 3`b010=三位宽二进制数字
    - 前缀(3) 表示数字位宽
  - unsized例子: 123= 默认的32位宽十进制数字
    - 默认
      - 没有指定的`<base format>`默认为decimal
      - 没有指定的`<size>`，默认为32位宽数字
- 基本格式
  - 十进制```（`d或者`D）``` 16`d225=16位宽十进制数字
  - 十六进制 ```（`h或者`H）``` 8`h9a=8位宽16进制数字
  - 二进制```（`b或者`B）``` 'b1010=32位宽二进制·1数字
  - 八进制```（`o或者`O）``` `o21=32位宽八进制数字
- 负数-在`<size>`前加上负号表示
  - 合法: -8`d3=8位负数,存储为2`的补码3
  - 非法: 4`d-2=ERROR!!
- 特殊数字字符:
  - `'_'`(下划线):用于可读性
    - 例子:32`h21_65_bc_fe=32位十六进制数字
  - `'x'`或者`'X'(未知值)`
    - 例子: 12`h12x=12位16进制数字;LSB未知
  - `'z'`或者`'Z'`(高阻抗值)
    - 例子:1`b=1位高阻抗数字

### 算子

|算子符号|执行的运算|例子ain=5,bin=10,cin=2`b01,din=2`b0z|
|:----:|:----:|:----:|
|`+`|加法|bin+cin=11|
|`-`|减法,取负|bin-cin=9,-bin=10|
|`*`|乘法|ain*bin=50|
|`/`|除法|bin/ain=2|
|`%`|取模|bin%ain=0|
  - 把矢量整体上作为一个数值
  - 如果任意操作数为Z或者X,那么结果未知
    - 例子: ain+din=unknown
  - 如果结果和操作数大小相同,则进位丢失
  - 负数以2的补码格式存储，但是当用在表达式中时，解释为无符号值

### 位算子
  
|算子符号|执行的运算|例子```ain=3`b101,bin=3`b110,cin=3`b01x```|
|:----:|:----:|:----:|
|~|每位取反|~ain=3`b010|
|&|每位AND|```ain^bin=3`b100,bin&cin=3`b010```|
|\||每位OR|ain\|bin=3`b111|
|^|每位Xor|ain^bin=3`b011|
|^~或者~^|每位Xnor|ain^~bin=3`b100|
 - 对操作数每一位进行运算
 - 结果是最大操作数的大小
 - 如果位宽不同，以0向左扩展

### 缩位算子
|算子符号|执行的运算|例子```ain=5`b10101,bin=4`b0011,cin=3`bZ00,din=3`bX011```|
|:----:|:----:|:----:|
|&|And所有位|&ain=1`b0,&din=1`b0|
|~&|Nand所有位|~&ain=1`b1|
|\||Or所有位|```\|ain=1`b1,\|cin=1`bX```|
|~\||Nor所有位|~\|ain=1`b0|
|^|Xor所有位|^ain=1`b1|
|~^或者^~|Xnor所有位|~^ain=1`b0|

  - 将矢量减为单比特
  - X或者Z被认为未知,但是结果可能是确定值
    - 例子: &din result in 1`b0

### 关系算子
|算子符号|执行的运算|例子```ain=3`b010,bin=3`b100,cin=3`b111,din=3`b01z,ein=3`b01x```|
|:----:|:----:|:----:|
|>|大于|ain>bin results false(1`b0)|
|<|小于|ain\<bin results true(1`b0)|
|>=|大于等于|ain>=din results unknown(1`bx)|
|<=|小于等于|ain<=ein results unknown(1`bx)|
  - 用于对比数值
  - 返回1位标量值，布尔真(1)/假(0)
  - 如果任一操作数是Z或者X,那么结果未知

### 相等算子
|算子符号|执行的运算|例子```ain=3`b010,bin=3`b100,cin=3`b111,din=3`b01z,ein=3`b01x```|
|:----:|:----:|:----:|
|==|相等|ain==bin results false(1`b0)|
|!=|不等|ain!=bin results unknown(1`bX)|
|===|条件相等|ein===ein results true(1`b1)|
|!==|条件不等|ein!==din results true(1`b1)|
  - 用于对比数值
  - 返回1位标量值,布尔真(1)/假(0)
  - 如果任意操作数是Z或者X,那么结果未知
  - 条件相等和不等不包括x和z

### 逻辑算子
|算子符号|执行的运算|例子```ain=3`b101,bin=3`b000```|
|:----:|:----:|:----:|
|!|非真|!ain is false(1`b0)|
|&&|所有表达式真|ain&&bin results false(1`b0)|
|\|\||一个或所有表达式真|ain\|\|bin results true(1`b1)|
  - 返回1位标量值, 布尔真(1)/假(0)
  - 如果任一操作数是Z或者X,那么结果未知

### 移位算子
|算子符号|执行的运算|例子```ain=4`b1010,bin=4`b10X0```|
|:----:|:----:|:----:|
|>>|右移|bin>>1 results 4`b010x|
|<<|左移|ain<<2 results 4`b1000|
  - 矢量向左或者向右移动一定比特
  - 填充0
  - 移出比特丢失

### 其他算子
|算子符号|执行的运算|例子|
|:----:|:----:|:----:|
|?:|条件|(condition)?true_val:false_val;<br>sig_out=(sel==2`b01)?A:B;|
|{}|连接|```ain=3`b010,bin=4`b1100``` <br>```{ain,bin} results 7`b0101100```|
|{{}}|复制|```{3{2`b10}} results 6`b101010```|

### 算子优先级
|算子默认优先级|
|:----:|
|+,-,!,~(unary)|
|+,-(Binary)|
|<<,>>|
|<,>,<=,>=|
|==,!=|
|&|
|^,^~ or ~^|
|\||
|&&|
|\|\||
|?:(ternary)|

- ()可以优于默认优先级

## 赋值
### 连续赋值声明
- 使用算子，对组合逻辑行为进行建模

# 任务和函数